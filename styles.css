:root{
  --bg:#0e0f12;
  --panel:#15171c;
  --muted:#8b93a0;
  --text:#e7e9ee;
  --accent:#7aa2ff;
  --border:#23262d;
  --bubble-user:#1e232d;
  --bubble-bot:#141924;
  --ring:0 0 0 2px rgba(122,162,255,.25);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial;
  background:#0e0f12; color:var(--text);
  display:flex; flex-direction:column;
}

.app-header,.app-footer{
  display:flex; align-items:center; justify-content:center;
  padding:12px 14px; border-bottom:1px solid var(--border);
  background:rgba(0,0,0,.25); backdrop-filter: blur(4px);
}
.app-footer{ border-top:1px solid var(--border); border-bottom:none }
.app-header h1{ font-size:16px; margin:0; letter-spacing:.8px }

.chat{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:12px;
  padding:10px;
  max-width:1200px; /* wider canvas so bubbles can be longer */
  width:100%;
  margin:0 auto;
}

.messages{
  list-style:none; padding:0; margin:0;
  display:flex; flex-direction:column; gap:10px;
  overflow:auto; scroll-behavior:smooth;
}

/* Ensure items don't force full-width */
.message{ display:flex; gap:10px; align-items:flex-start }
.message .content{
  display:flex;
  flex:0 1 auto;       /* shrink to content, don't stretch full width */
  max-width:100%;
}

/* Align sides */
.message.bot .content{ justify-content:flex-start }
.message.user .content{ justify-content:flex-end }

/* Bubble: shrink to fit content, cap at a readable max width */
.bubble{
  display:inline-block;        /* shrink-wrap to content */
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:12px;
  max-width:min(96%, 80ch);    /* cap width: 80ch or 96% of row */
  white-space:pre-wrap;        /* keep user-entered newlines */
  overflow-wrap:break-word;    /* break long URLs/tokens if needed */
  word-break:keep-all;         /* don't split normal words like "hello" */
  hyphens:auto;                /* nicer breaks for very long words */
}

.message.user .bubble{ background:var(--bubble-user) }
.message.bot  .bubble{ background:var(--bubble-bot) }

.meta{ font-size:12px; color:var(--muted); margin-top:4px }

/* Composer */
.composer{
  display:flex; gap:10px; padding:10px; background:var(--panel);
  border:1px solid var(--border); border-radius:12px; align-items:flex-end;
}
.composer textarea{
  flex:1; resize:none; min-height:42px; max-height:160px;
  padding:10px 12px; border-radius:8px; border:1px solid var(--border);
  background:#0e121a; color:var(--text); outline:none;
}
.composer textarea:focus{ box-shadow:var(--ring); border-color:#2a2f3a }
.send-btn{
  background:var(--accent); color:#0b1020; border:none; border-radius:8px; padding:10px 14px; font-weight:700;
  cursor:pointer; transition:transform .1s ease, opacity .1s ease;
}
.send-btn:disabled{ opacity:.6; cursor:not-allowed }
.send-btn:active{ transform:translateY(1px) }

/* Typing indicator */
.typing{ display:inline-block; min-width:28px }
.typing span{
  display:inline-block; width:6px; height:6px; background:#9fb6ff; border-radius:50%; margin-right:4px;
  animation: blink 1.3s infinite ease-in-out;
}
.typing span:nth-child(2){ animation-delay:.15s }
.typing span:nth-child(3){ animation-delay:.3s }
@keyframes blink{ 0%,80%,100%{opacity:.25;transform:translateY(0)} 40%{opacity:1;transform:translateY(-2px)} }

@media (max-width:600px){
  .bubble{ max-width:100% } /* full width on small screens */
}